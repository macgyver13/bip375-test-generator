description: "Valid mixed-input scenarios"

test_cases:
  - description: "can finalize: two mixed input types - only eligible inputs contribute ECDH shares (P2SH excluded)"
    validation_result: "valid"
    inputs:
      - type: "p2wpkh"
        amount: 100000
        key_derivation_suffix: "mixed_p2wpkh"
      - type: "p2sh_multisig"
        amount: 150000
        multisig_threshold: 2
        multisig_pubkey_count: 2
        key_derivation_suffix: "mixed_p2sh"
    outputs:
      - type: "silent_payment"
        amount: 90000
        scan_key_id: "default"
    scan_keys:
      - key_id: "default"

  - description: "can finalize: two mixed input types - only eligible inputs contribute ECDH shares (NUMS point excluded)"
    validation_result: "valid"
    inputs:
      - type: "p2tr"
        amount: 10000
        use_nums_tap_internal_key: true
      - type: "p2wpkh"
        amount: 100000
        key_derivation_suffix: "mixed_p2wpkh"
    outputs:
      - type: "silent_payment"
        amount: 9500
        scan_key_id: "default"
